{
  "version": 3,
  "sources": [
    "../src/Hue.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "Hue.js",
  "sourcesContent": [
    "/*\n * Copyright [2015-2017] Fraunhofer Gesellschaft e.V., Institute for\n * Open Communication Systems (FOKUS)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport HueControl from \"philips-hue\";\nimport logger from \"logops\";\nimport async from \"async\";\n\nclass Hue {\n    constructor(lwm2m, bridge, username) {\n        this._lwm2m = lwm2m;\n        this._hue = new HueControl();\n        this._hue.bridge = bridge;\n        this._hue.username = username;\n    }\n\n    start() { //Get all lights and create lwm2m-objects\n        var that = this;\n        return new Promise((resolve, reject) => {\n            var lights = null;\n\n            this._hue.getLights()\n                .catch(reject)\n                .then((result) => {\n                    lights = result;\n                    return that._createObjects(lights);\n                })\n                .catch(reject)\n                .then(() => {\n                    resolve(lights)\n                })\n        });\n    }\n\n    _createObjects(lights) {\n        var that = this;\n        return new Promise((resolve, reject) => {\n            var errors = [];\n\n            async.each(Object.keys(lights), (id, callback) => {\n                that._lwm2m.registry.create(\"/3311/\" + id, (error) => {\n                    if (error) {\n                        errors.push(error);\n                    }\n                    else {\n                        logger.debug(\"Hue: Created lwm2m-object for light '\" + id + \"' '/3311/\" + id + \"'\");\n                    }\n                    callback();\n                })\n            }, () => {\n                if (errors.length > 0) {\n                    reject(errors);\n                }\n                else {\n                    resolve();\n                }\n            }); //Resolve when all objects have been created\n        });\n    }\n\n    stop() {\n\n    }\n\n    handleWrite(objectType, objectId, resourceId, value) {\n        var that = this;\n        return new Promise((resolve, reject) => {\n            if (objectType != \"3311\") {\n                reject(new Error(\"Invalid objectType for hue!\"));\n            }\n            else {\n                switch (resourceId) {\n                    case \"5850\": //On/off\n                        if (value == true) {\n                            that._hue.light(objectId).on()\n                                .catch(reject)\n                                .then(resolve);\n                        }\n                        else {\n                            that._hue.light(objectId).off()\n                                .catch(reject)\n                                .then(resolve);\n                        }\n                        break;\n                    case \"5851\": //Dimmer (0-100)\n                        reject(new Error(\"Dimmer-control not yet supported\"));\n                        break;\n                    case \"5706\": //Colour\n                        reject(new Error(\"Colour-control not yet supported\"));\n                        break;\n                    default:\n                        reject(new Error(\"Unknown operation for resourceId \" + resourceId));\n                        break;\n                }\n            }\n        });\n    }\n\n    get ctl() {\n        return this._hue;\n    }\n}\n\nexport default Hue;"
  ]
}