{"version":3,"sources":["../test/server-cmd.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;;AAEA;;;;AACA;;;;AACA;;;;;;AAEA,SAAS,KAAT,GAAiB;AACb,QAAI,gBAAM,MAAN,CAAa,SAAb,EAAJ,EAA8B;AAC1B,gBAAQ,KAAR,CAAc,8CAAd;AACA,8BAAI,MAAJ;AACH,KAHD,MAIK;AACD,gBAAQ,GAAR,CAAY,2BAAZ;AACA,wBAAM,SAAN;AACA,wBAAM,KAAN,GACK,KADL,CACW,UAAC,KAAD,EAAW;AACd,oBAAQ,KAAR,CAAc,6BAAd,EAA6C,KAA7C;AACA,kCAAI,MAAJ;AACH,SAJL,EAKK,IALL,CAKU,YAAM;AACR,oBAAQ,GAAR,CAAY,wBAAZ;AACA,kCAAI,MAAJ;AACH,SARL;AASH;AACJ;;AAED,SAAS,IAAT,GAAgB;AACZ,QAAI,gBAAM,MAAN,CAAa,SAAb,EAAJ,EAA8B;AAC1B,gBAAQ,GAAR,CAAY,2BAAZ;AACA,wBAAM,IAAN,GACK,KADL,CACW,UAAC,KAAD,EAAW;AACd,oBAAQ,KAAR,CAAc,4BAAd,EAA4C,KAA5C;AACA,kCAAI,MAAJ;AACH,SAJL,EAKK,IALL,CAKU,YAAM;AACR,oBAAQ,GAAR,CAAY,wBAAZ;AACA,kCAAI,MAAJ;AACH,SARL;AASH,KAXD,MAYK;AACD,gBAAQ,KAAR,CAAc,wCAAd;AACA,8BAAI,MAAJ;AACH;AACJ;;;AAGD,SAAS,KAAT,CAAe,MAAf,EAAuB;AACnB,oBAAM,MAAN,CAAa,KAAb,CACI,OAAO,CAAP,CADJ,EAEI,OAAO,CAAP,CAFJ,EAGI,OAAO,CAAP,CAHJ,EAII,OAAO,CAAP,CAJJ,EAKI,OAAO,CAAP,CALJ,EAMI,UAAC,KAAD,EAAW;AACP,YAAI,KAAJ,EAAW;AACP,oBAAQ,GAAR,CAAY,+BAAZ,EAA6C,KAA7C;AACH,SAFD,MAGK;AACD,oBAAQ,GAAR,CAAY,gCAAZ;AACH;AACJ,KAbL;AAcH;;AAED,SAAS,UAAT,GAAsB;AAClB,YAAQ,GAAR;AACH;;AAED,SAAS,IAAT,GAAgB;AACZ,YAAQ,IAAR,CAAa,CAAb;AACH;;AAGD,IAAI,WAAW;AACX,aAAS;AACL,oBAAY,EADP;AAEL,qBAAa,uBAFR;AAGL,iBAAS;AAHJ,KADE;AAMX,YAAQ;AACJ,oBAAY,EADR;AAEJ,qBAAa,sBAFT;AAGJ,iBAAS;AAHL,KANG;AAWX,aAAS;AACL,oBAAY,CAAC,IAAD,EAAO,YAAP,EAAqB,UAArB,EAAiC,YAAjC,EAA+C,OAA/C,CADP;AAEL,qBAAa,4CAFR;AAGL,iBAAS;AAHJ,KAXE;AAgBX,cAAU;AACN,oBAAY,EADN;AAEN,qBAAa,8BAFP;AAGN,iBAAS;AAHH,KAhBC;AAqBX,YAAQ;AACJ,oBAAY,EADR;AAEJ,qBAAa,YAFT;AAGJ,iBAAS;AAHL;AArBG,CAAf;AA2BA,sBAAI,UAAJ,CAAe,QAAf,EAAyB,iBAAzB","file":"server-cmd.js","sourcesContent":["/*\n * Copyright [2015-2017] Fraunhofer Gesellschaft e.V., Institute for\n * Open Communication Systems (FOKUS)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n/*\n * Script for testing the server without test-framework (mocha) but console-prompt.\n */\n'use strict';\n\nimport lwm2m from \"../dist/index.js\";\nimport config from \"../config.js\";\nimport cmd from \"command-node\";\n\nfunction start() {\n    if (lwm2m.server.isRunning()) {\n        console.error(\"rethink-lwm2m start failed! Already running.\");\n        cmd.prompt();\n    }\n    else {\n        console.log(\"Starting rethink-lwm2m...\");\n        lwm2m.setConfig(config);\n        lwm2m.start()\n            .catch((error) => {\n                console.error(\"rethink-lwm2m start failed!\", error);\n                cmd.prompt();\n            })\n            .then(() => {\n                console.log(\"rethink-lwm2m started!\");\n                cmd.prompt();\n            })\n    }\n}\n\nfunction stop() {\n    if (lwm2m.server.isRunning()) {\n        console.log(\"Stopping rethink-lwm2m...\");\n        lwm2m.stop()\n            .catch((error) => {\n                console.error(\"rethink-lwm2m stop failed!\", error);\n                cmd.prompt();\n            })\n            .then(() => {\n                console.log(\"rethink-lwm2m stopped!\");\n                cmd.prompt();\n            });\n    }\n    else {\n        console.error(\"Can't stop rethink-lwm2m! Not running.\");\n        cmd.prompt();\n    }\n}\n\n//TODO: License\nfunction write(params) {\n    lwm2m.server.write(\n        params[0],\n        params[1],\n        params[2],\n        params[3],\n        params[4],\n        (error) => {\n            if (error) {\n                console.log(\"Error while writing resource!\", error);\n            }\n            else {\n                console.log(\"Written resource successfully!\");\n            }\n        })\n}\n\nfunction showConfig() {\n    console.log(config);\n}\n\nfunction exit() {\n    process.exit(0);\n}\n\n\nvar commands = {\n    'start': {\n        parameters: [],\n        description: '\\tStart reTHINK-lwm2m',\n        handler: start\n    },\n    'stop': {\n        parameters: [],\n        description: '\\tStop reTHINK-lwm2m',\n        handler: stop\n    },\n    'write': {\n        parameters: ['id', 'objectType', 'objectId', 'resourceId', 'value'],\n        description: '\\tManual lwm2m-write for development-tests',\n        handler: write\n    },\n    'config': {\n        parameters: [],\n        description: '\\tShow current configuration',\n        handler: showConfig\n    },\n    'exit': {\n        parameters: [],\n        description: '\\tExit cmd',\n        handler: exit\n    }\n};\ncmd.initialize(commands, 'reTHINK-lwm2m> ');"]}